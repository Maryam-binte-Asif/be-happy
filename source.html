<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Are You Okay?</title>
    <style>
        /* Your existing CSS remains the same */
        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to right, #ffffff, #f8f8f8);
            text-align: center;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            justify-content: center;
            overflow: hidden;
        }
        
        h1 {
            font-size: 2.5rem;
            color: #8b0000;
            margin-bottom: 1rem;
        }
        
        .buttons {
            position: relative;
            width: 300px;
            height: 70px;
            margin-bottom: 1rem;
        }
        
        button {
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            min-width: 110px;
            user-select: none;
            position: absolute;
        }
        
        #yesBtn {
            background-color: #d32f2f;
            color: #ffffff;
            box-shadow: 0 4px 10px rgba(211, 47, 47, 0.5);
            left: 30%;
            transform: translateX(-50%);
        }
        
        #noBtn {
            background-color: #000000;
            color: #ffffff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            left: 70%;
            transform: translateX(-50%);
        }
        
        #noBtn:hover {
            background-color: #333333;
        }
        
        #cuteImg {
            width: 250px;
            height: auto;
            border-radius: 12px;
            margin-top: 1rem;
            animation: bounce 1.5s infinite;
            border: 4px solid #8b0000;
        }
        
        #message {
            font-size: 1.5rem;
            color: #8b0000;
            font-weight: 600;
            min-height: 2rem;
            margin-top: 1rem;
            user-select: none;
        }
        
        .full-screen-message {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 255, 255, 0.97);
            color: #b71c1c;
            font-size: 2.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 2rem;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease;
            user-select: none;
        }
        
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }
    </style>
</head>
<body>
    <h1>ARE YOU OKAY?</h1>
    
    <div class="buttons">
        <button id="yesBtn">Yes ðŸ’–</button>
        <button id="noBtn">No ðŸ’”</button>
    </div>
    
    <p id="message"></p>
    
    <img id="cuteImg" src="https://media.giphy.com/media/ya4eevXU490Iw/giphy.gif" alt="Cute" />
    
    <!-- Sounds -->
    <audio id="sadSound" src="https://www.myinstants.com/media/sounds/sad-trombone.mp3"></audio>
    <audio id="tryAgainSound" src="https://www.myinstants.com/media/sounds/windows-error.mp3"></audio>
    <!-- New reliable kiss sound source -->
    <audio id="kissSound">
        <source src="https://www.myinstants.com/en/instant/yaaaaaaaay/" type="audio/mpeg">
    </audio>

    <script>
        const yesBtn = document.getElementById("yesBtn");
        const noBtn = document.getElementById("noBtn");
        const message = document.getElementById("message");
        const sadSound = document.getElementById("sadSound");
        const tryAgainSound = document.getElementById("tryAgainSound");
        const kissSound = document.getElementById("kissSound");
    
        const cuteImg = document.getElementById("cuteImg");

        // Preload sounds
        window.addEventListener('load', function() {
            // Try to play and immediately pause to preload
            try {
                kissSound.volume = 0.5; // Set appropriate volume
                kissSound.play().then(() => {
                    kissSound.pause();
                    kissSound.currentTime = 0;
                }).catch(e => console.log("Kiss sound preload error:", e));
            } catch (e) {
                console.log("Kiss sound error:", e);
            }
        });

        let noClickCount = 0;
        let hoverMoves = 0;

        noBtn.addEventListener("mouseover", () => {
            if (hoverMoves < 4) {
                const randomX = Math.random() * 100;
                const randomY = Math.random() * 50;
                noBtn.style.left = `${randomX + 10}%`;
                noBtn.style.top = `${randomY}px`;
                hoverMoves++;
            }
        });

        function showFullScreenMessage(text, duration = 2000, callback = null, sound = null) {
            const div = document.createElement("div");
            div.classList.add("full-screen-message");
            div.innerHTML = `<div style="animation: bounce 1s infinite;">${text}</div>`;
            document.body.appendChild(div);
            setTimeout(() => (div.style.opacity = 1), 50);
            if (sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log("Sound play error:", e));
            }
            setTimeout(() => {
                div.style.opacity = 0;
                setTimeout(() => {
                    div.remove();
                    if (callback) callback();
                }, 500);
            }, duration);
        }

        function resetToInitialState() {
            noClickCount = 0;
            hoverMoves = 0;
            message.innerHTML = "";
            cuteImg.src = "https://media.giphy.com/media/ya4eevXU490Iw/giphy.gif";
            noBtn.style.left = "70%";
            noBtn.style.top = "0";
            yesBtn.style.display = "inline-block";
            noBtn.style.display = "inline-block";
        }

        noBtn.addEventListener("click", () => {
            try {
                sadSound.currentTime = 0;
                sadSound.play().catch(e => console.log("Sad sound error:", e));
            } catch (e) {
                console.log("Sad sound error:", e);
            }
            
            noClickCount++;

            if (noClickCount === 1) {
                showFullScreenMessage(
                    "You are not alone, okay? I am still here, and I care a lot about you.ðŸ’–",
                    2000,
                    null,
                    tryAgainSound
                );
            } else if (noClickCount === 2) {
                showFullScreenMessage(
                    "If hugs could teleport, I would send you a thousand.",
                    2000,
                    null,
                    tryAgainSound
                );
            } else if (noClickCount === 3) {
                showFullScreenMessage(
                    "Distance can stretch across oceans, but it can not touch the bond between two souls who care.",
                    2000,
                    null,
                    tryAgainSound
                );
            } else if (noClickCount >= 4) {
                showFullScreenMessage(
                    "Not okay again? that's alright, rider soul.<br>You don't have to fix it all right now.<br>Wanna shift gears and talk about anything else, or just call for a bit? I'm here for you, no pressure.",
                    4000,
                    resetToInitialState,
                    sadSound
                );
            }
        });

        yesBtn.addEventListener("click", () => {
            try {
                kissSound.currentTime = 0; // Rewind to start
                kissSound.play().catch(e => console.log("Kiss sound error:", e));
            } catch (e) {
                console.log("Kiss sound error:", e);
            }
            
            cuteImg.src = "https://media.giphy.com/media/4N1wOi78ZGzSB6H7vK/giphy.gif";
            message.innerHTML = "Glad to hear that, even if it is just a little better. Either things are better, or you are being brave. Either way lets just laugh about dumb stuff on a call ðŸ’‹";
            yesBtn.style.display = "none";
            noBtn.style.display = "none";
            launchConfetti();
        });

        function launchConfetti() {
            const duration = 3 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 1000 };
            const interval = setInterval(() => {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti(
                    Object.assign({}, defaults, {
                        particleCount,
                        origin: { x: Math.random(), y: Math.random() - 0.2 }
                    })
                );
            }, 250);
        }

        // Load confetti library
        const script = document.createElement("script");
        script.src = "https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js";
        document.body.appendChild(script);
    </script>
</body>
</html>
